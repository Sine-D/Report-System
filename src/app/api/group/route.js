/*###################################################################################################################################################
#####################################################################################################################################################
################################################################     KAVIJA DULMITH    ##############################################################
################################################################       02/09/2025      ##############################################################
#####################################################################################################################################################
####################################################################################################################################################*/

import { queryDatabase } from '../../db';

export async function GET() {

    try {

        const query = `
            SELECT [LocId]
                ,[SysId]
                ,[CateId]
                ,[GrpName]
                ,[VisibleStat]
                ,[DefaultStat]
                ,[ActiveStat]
                ,[TrnYes]
                ,[SinhalaName]
                ,[MasterGrpCode]
                ,[TouchVisible]
                ,[CSID]
            FROM [dbo].[GROUP_MST]
            WHERE [CateId] = 'ITEMGROU' OR [CateId] = 'ITMSUBGR'
        `
        const groups = await queryDatabase(query);
        console.log(groups)
        return new Response(JSON.stringify(groups || []),{
            status: 200,
            headers: { "Content-Type": "application/json" }
        })

    } catch (err) {

        return new Response(JSON.stringify([]), { status: 500 });
    }
}

